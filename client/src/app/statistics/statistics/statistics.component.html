<div class="statistics">
  <div class="statistics__accounts">
    <app-account-card
      *ngFor="let account of accounts; let i = index; trackBy: trackBy"
      [account]="account"
    >
    </app-account-card>
  </div>
  <div class="statistics__main">
    <mat-tab-group>
      <mat-tab label="Categories statistic">
        <div class="statistics__main__categories">
          <mat-form-field appearance="fill">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input
                matStartDate
                formControlName="start"
                placeholder="Start date"
                (ngModelChange)="updateCalcs()"
              />
              <input
                matEndDate
                formControlName="end"
                placeholder="End date"
                (ngModelChange)="updateCalcs()"
              />
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>

            <mat-error
              *ngIf="range.controls.start.hasError('matStartDateInvalid')"
              >Invalid start date</mat-error
            >
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
              >Invalid end date</mat-error
            >
          </mat-form-field>
          <div class="statistics__main__categories__amount">
            <span>Total expenses:</span>
            <span class="statistics__main__categories__amount__colored">{{
              amount | currency: currency
            }}</span>
          </div>
          <div class="statistics__main__categories__data">
            <div class="statistics__main__categories__table">
              <table mat-table [dataSource]="statistics">
                <ng-container matColumnDef="category">
                  <th mat-header-cell *matHeaderCellDef>Category</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.category | titlecase }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef>Amount</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.amount | currency: currency }}
                  </td>
                </ng-container>
                <ng-container matColumnDef="precentage">
                  <th mat-header-cell *matHeaderCellDef>% in total</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.precentage }}%
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns"
                ></tr>
              </table>
            </div>
            <div class="statistics__main__categories__chart">
              <canvas id="categoriesChart"></canvas>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Monthly statistic">
        <div class="statistics__main__monthly"></div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
